START CONTROL,
*PROJECT WALL-E

! C = P_WALLE_2022Q1.ASC;P_WALLE_2022Q2.ASC;P_WALLE_2022Q3.ASC;P_WALLE_2022Q4.ASC;P_WALLE_2023Q1.ASC;P_WALLE_2023Q2_PUNCHED.ASC,

! c = P_WALLE_2023Q2_PUNCHED.ASC,

C = P_WALLE_2022Q3.ASC;P_WALLE_2022Q4.ASC;P_WALLE_2023Q1.ASC;P_WALLE_2023Q2.ASC;P_WALLE_2023Q3.ASC,


Y,
CEP,
BIG,
TIDY,
TERSE,
CSVR2,
OLDNAMES,
FINISH CONTROL,

START DATA,
ORDER1234567890XV,
SERIAL NUMBER IN COLUMNS 1-10,
CARD CHARACTERS BINARY 300000,
TEMPORARY /99999999/,

DI $RESP = $1-10,

di $blank = 0,
di $Blankamt = $299996-300000,
[*INSERT WallE_insertGlobal]
[*INSERT WallE_oesoe]

[*INSERT WallE_resp]

[*INSERT walle_cardcol_banner]
[*INSERT walle_cardcol_p1] !always need
[*INSERT walle_cardcol_p6] !Q104a Q51a

[*INSERT WallE_insertAlign_pickup]
[*INSERT WallE_insertAlign1] !always need
[*INSERT WallE_insertAlign6] !Q104a Q51a


[*INSERT WallE_stubs_pickup]


[*INSERT WALLE_HEADERS_Trend]
[*INSERT WALL_E_NEWWTS]
!ITEM 20 Q2 2022

! guide
! label;subordinate count below;hierarchy;code
[*SET TP1Row = 0]
[*DATA TP1stubs[+TP1Row] (;) = PUBLIC TRANSPORTATION (NET) <Q>;9;1;]
[*DATA TP1stubs[+TP1Row] (;) = Jeepney;0;2;1]
[*DATA TP1stubs[+TP1Row] (;) = Tricycle;0;2;2]
[*DATA TP1stubs[+TP1Row] (;) = UV Express or Taxi;0;2;3]
[*DATA TP1stubs[+TP1Row] (;) = Bus;0;2;4]
[*DATA TP1stubs[+TP1Row] (;) = Carousel;0;2;5]
[*DATA TP1stubs[+TP1Row] (;) = Train (MRT, LRT, and PNR);0;2;6]
[*DATA TP1stubs[+TP1Row] (;) = LRT-1 or LRT-2;0;2;7]
[*DATA TP1stubs[+TP1Row] (;) = PNR;0;2;8]
[*DATA TP1stubs[+TP1Row] (;) = Taxi;0;2;9]
[*DATA TP1stubs[+TP1Row] (;) = RIDE HAILING APPS/ TVNS (NET) <Q>;13;1;]
[*DATA TP1stubs[+TP1Row] (;) = Motorcycle (e.g., Joyride, Angkas, etc);0;2;11]
[*DATA TP1stubs[+TP1Row] (;) = Car (e.g., Grab, Joyride Car, Carpool, Toktokgo, etc);0;2;12]
[*DATA TP1stubs[+TP1Row] (;) = Grab;0;2;13]
[*DATA TP1stubs[+TP1Row] (;) = TokTokGo;0;2;14]
[*DATA TP1stubs[+TP1Row] (;) = AVIS;0;2;15]
[*DATA TP1stubs[+TP1Row] (;) = ePickMeUp;0;2;16]
[*DATA TP1stubs[+TP1Row] (;) = OWTO;0;2;17]
[*DATA TP1stubs[+TP1Row] (;) = Snappy;0;2;18]
[*DATA TP1stubs[+TP1Row] (;) = Hype;0;2;19]
[*DATA TP1stubs[+TP1Row] (;) = Go Lag;0;2;20]
[*DATA TP1stubs[+TP1Row] (;) = Hirna;0;2;21]
[*DATA TP1stubs[+TP1Row] (;) = MiCab;0;2;22]
[*DATA TP1stubs[+TP1Row] (;) = Other ride hailing services, please specify;0;2;98]
[*DATA TP1stubs[+TP1Row] (;) = OTHER MODES OF TRANSPORTATION (NET) <Q>;2;1;]
[*DATA TP1stubs[+TP1Row] (;) = Airplane;0;2;23]
[*DATA TP1stubs[+TP1Row] (;) = Ferry;0;2;24]
[*DATA TP1stubs[+TP1Row] (;) = PERSONAL (NET) <Q>;2;1;]
[*DATA TP1stubs[+TP1Row] (;) = I have my own car;0;2;25]
[*DATA TP1stubs[+TP1Row] (;) = I have my own motorcycle;0;2;26+1001]

[*DOA=1:BR]
OM $TTD_REG = $I_[ROWBRAND.A]_A_TD1,
DM $TTDR[A] =
$I_[ROWBRAND.A]_A_TD1/
1+2+3+4+5+6+7+8+9,
1,
2,
3,
4,
5,
6,
7,
8,
9,
11+12+13+14+15+16+17+18+19+20+21+22+98,
11,
12,
13,
14,
15,
16,
17,
18,
19,
20,
21,
22,
98,
23+24,
23,
24,
25+26,
25,
26,
R,F,
VT = "TD1. MODE OF TRANSPORTATION USED IN THE PAST 2 MONTHS - [BRAND.A]",
V = "
PUBLIC TRANSPORTATION (NET) <Q>;
`     Jeepney;
`     Tricycle;
`     UV Express or Taxi;
`     Bus;
`     Carousel;
`     Train (MRT, LRT, and PNR);
`     LRT-1 or LRT-2;
`     PNR;
`     Taxi;
RIDE HAILING APPS/ TVNS (NET) <Q>;
`     Motorcycle (e.g., Joyride, Angkas, etc);
`     Car (e.g., Grab, Joyride Car, Carpool, Toktokgo, etc);
`     Grab;
`     TokTokGo;
`     AVIS;
`     ePickMeUp;
`     OWTO;
`     Snappy;
`     Hype;
`     Go Lag;
`     Hirna;
`     MiCab;
`     Other ride hailing services, please specify;
OTHER MODES OF TRANSPORTATION (NET) <Q>;
`     Airplane;
`     Ferry;
PERSONAL (NET) <Q>;
`     I have my own car;
`     I have my own motorcycle;
Missing answers<Z>;
Total count<C>",
[*END A]

DM $TTP1 =
$A_TP1/
1+2+3+4+5+6+7+8+9,
1,
2,
3,
4,
5,
6,
7,
8,
9,
11+12+13+14+15+16+17+18+19+20+21+22+98,
11,
12,
13,
14,
15,
16,
17,
18,
19,
20,
21,
22,
98,
23+24,
23,
24,
25+26,
25,
26,
R,F,
VT = "TP1. MODE OF TRANSPORTATION USED IN THE PAST 2 MONTHS",
V = "
PUBLIC TRANSPORTATION (NET) <Q>;
`     Jeepney;
`     Tricycle;
`     UV Express or Taxi;
`     Bus;
`     Carousel;
`     Train (MRT, LRT, and PNR);
`     LRT-1 or LRT-2;
`     PNR;
`     Taxi;
RIDE HAILING APPS/ TVNS (NET) <Q>;
`     Motorcycle (e.g., Joyride, Angkas, etc);
`     Car (e.g., Grab, Joyride Car, Carpool, Toktokgo, etc);
`     Grab;
`     TokTokGo;
`     AVIS;
`     ePickMeUp;
`     OWTO;
`     Snappy;
`     Hype;
`     Go Lag;
`     Hirna;
`     MiCab;
`     Other ride hailing services, please specify;
OTHER MODES OF TRANSPORTATION (NET) <Q>;
`     Airplane;
`     Ferry;
PERSONAL (NET) <Q>;
`     I have my own car;
`     I have my own motorcycle;
Missing answers<Z>;
Total count<C>",


! ============ Payment for Transportation ============== !
dm $TP1_TD1 = $TTD_REG .or. $A_TP1,


DM $TTP1_TD1 = $TP1_TD1/
[*DO A = 1:TP1Row]
[*BLOCK 333 ON [TP1Stubs[A].2].GT.0][*DO B = A+1:[A+[TP1Stubs[A].2]]][TP1Stubs[B].4][*SLE]+[*END B][*333][TP1Stubs[A].4],
[*END A]
R,F,
XT = "Q104A/Q51A. TYPE OF STORE/ MERCHANT BOUGHT AND PAID OFFLINE FROM ANY STORE/BANK/ESTABLISHMENT IN THE PAST 2 MONTHS - (ONLINE/OFFLINE)",
X = "
[*DO A = 1:TP1Row]
[*SK 333 ON [TP1Stubs[A].3].EQ.1]` [*333][*SK 333 ON [TP1Stubs[A].3].EQ.1][*DO Y = 1:[[TP1Stubs[A].3]-1]]    [*END Y][*333][TP1Stubs[A].1];
[*END A]
Missing answers<Z>;
Total count<C>",

DM $TTP1_TD1_NEW = [*DO A = 1:TP1Row]
                      $TP1_TD1/[A],
                      $TP1_TD1/[A].($TQ8bR1/12.$TQ8bR2/N12),
                      $TP1_TD1/[A].($TQ8bR1/N12.$TQ8bR2/12),
                      $TP1_TD1/[A].($TQ8bR1/12.$TQ8bR2/12),
                      [*END A]

XT = "TP1/TD1. MODE OF TRANSPORTATION USED IN THE PAST 2 MONTHS - (ONLINE/OFFLINE)",
X = "
[*DO A = 1:TP1Row]
[*SK 333 ON [TP1Stubs[A].3].EQ.1]` [*333][*SK 333 ON [TP1Stubs[A].3].EQ.1][*DO Y = 1:[[TP1Stubs[A].3]-1]]    [*END Y][*333][TP1Stubs[A].1];
` [*DO Y = 1:[TP1Stubs[A].3]]    [*END Y]Digital only;
` [*DO Y = 1:[TP1Stubs[A].3]]    [*END Y]Non-Digital only;
` [*DO Y = 1:[TP1Stubs[A].3]]    [*END Y]Hybrid Payment[*SLE];
[*END A]",

FINISH DATA,
START TABLES,


!!!!!!!!!!!!!!!!
!!!!!FORMAT!!!!!
!!!!!!!!!!!!!!!!





GLOBAL IT # = '<JL>Wall-E',



!======FOR QPS WINDOWS (% + raw - for datachecking)
F= CTU'='/CAZ'-'/CZP'-'/SDV/UCH/NPGN/NPTC/TID/RLW30/LBB1/TOC/SPL250/CNZ'*'/URS/
  DPR1/PCS/BRS/BCS/PRC/BTS/LPP55/NSER/CLG1/RNC1/NDAT/NPGN/BAL/RBL/BCS/BTS/CLW9/PBL/MOD,

F=SDV,		! ------ PRINT STD DEVIATION
F=DPR4,		! ------ DECIMAL %
F=DPT0,		! ------ DECIMAL RAW COUNT
F=DPA4,		! ------ DECIMAL MEAN,SUM..
F=DPS4,	        ! ------ DECIMAL STD,
F=MOD,		! ------ DISPLAY MODE
F=MED,		! ------ DISPLAY MEDIAN
!F=MCB29,          ! ------ Less than 30 base
F=BTS,                  ! ------ Blank Tables Suppress
F=BCS,                  ! ------ Blank Column Suppress
F=NBRS,                  ! ------ Blank Row Suppress
F=PBL/MOD,

%AVG = 'Mean score<D2>',
%DAT = '<&DD>/<&MONTH>/<&YY>',
%RTH = '<ML3>ROW %',
%RTV = '<ML3>COL %',
%PRC = '<ML3>COUNT',
%SER = '<ML3>STD ERR OF MEAN',
%SDV ='STANDARD DEVIATION',
%PTR = "TOTAL",
!%AVG ='MEAN SCORE',
%SDV ='STANDARD DEVIATION',
%MED = '<ML7>MEDIAN            ',
%UNR = '<ML7>(UNWEIGHTED BASE)',


  
F=SHG1/SIG/SLA95/SLB95/BRS/FSL,  !---------SIGTEST

!F=NRTV, ! ------- ONLY COUNT
!F=NPRC, ! -------- ONLY %



SELECT WR $newwts,


F=BRS,


[*DATA HXOLD=HAT,HBT,HCT,HDT,HET,HFT,HGT,HHT,HIT,HJT,HKT,HLT,HMT,HNT]

[*DATA HX=
HA1T,
HET,
HIT,
HLT,
HOT]


[*SET T = 0]

!ITEM 21 Q3 2022
!ITEM 20 Q2 2022
[*do X = 1:2]
IF ($Filter27F12_REG/NB)+($TQ8bR2/12), T [+T] = $TTP1_TD1_NEW * $[HX.X],
BT = "AMONG THOSE WHO PAY FOR TRANSPORTATION ONLINE/OFFLINE",
[*ENDX]
!
[*do X = 1:2]
if $TQ17i/1, then,
IF ($Filter27F12_REG/NB)+($TQ8bR2/12), T [+T] = $TTP1_TD1_NEW * $[HX.X],
BT = "AMONG USERS OF FINTECH APPS AND THOSE WHO PAY FOR TRANSPORTATION ONLINE/OFFLINE",
end if,
[*ENDX]
!
[*do X = 1:2]
if $TQ17i/2, then,
IF ($Filter27F12_REG/NB)+($TQ8bR2/12), T [+T] = $TTP1_TD1_NEW * $[HX.X],
BT = "AMONG NON-USERS OF FINTECH APPS AND THOSE WHO PAY FOR TRANSPORTATION ONLINE/OFFLINE",
end if,
[*ENDX]



FINISH TABLES,